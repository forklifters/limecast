<% options ||= {} -%>
<% episode = video_player -%>
<% source  = episode.sources.with_screenshot.with_preview.first -%>
<% attrs ||= {} %>
<% attrs.reverse_merge! :class => "scale", :rel => source.preview.url, :poster => source.screenshot.url, 
                        :width => source.width, :height => source.height if source %>
<% (attrs[:class] ||= "") << " container" %>
<% javascript_include "video_preview" -%>

<%- if source -%>
  <%= content_tag :div, "", attrs  %>
<%- else -%>
  <%= image_tag('/imgs/video_placeholder.png', :alt => "#{episode.title} cover art is missing", :width => 460) unless options[:hide_broken_previews] -%>
<%- end -%>
