<% hide_totals = true unless defined?(hide_totals) %>

<div class="reviews">
  <h2>Reviews</h2>

  <% unless hide_totals -%>
  <p>
    <%= link_to_with_icon "Positive (#{podcast.reviews.that_are_positive.count})", :thumbs_up, positive_reviews_url(:podcast => podcast) %>
    <%= link_to_with_icon "Negative (#{podcast.reviews.that_are_negative.count})", :thumbs_down, negative_reviews_url(:podcast => podcast) %>
    <%= link_to "All (#{podcast.reviews.count})", reviews_url(:podcast => podcast) %>
  </p>
  <% end -%>

  <ul class="reviews">
    <%= render :partial => 'reviews/review', :collection => reviews -%>
  </ul>

  <% if can_add_reviews?(podcast.episodes.newest.first) %>
    <%= render :partial => 'reviews/add_review', :object => podcast -%>
  <% end %>

  <% reset_cycle('row_class') %>
</div>
