<h1>Feed</h1>

<h2>Map</h2>
<%= render :partial => 'info/feeds/info_source_table', :locals => {:options => {:feed => @feed}} -%>

<h2>Info</h2>
<table>
  <tr>
    <td class="key">maker</td>
    <td><%= @feed.podcast.owner.nil? ? blankness : link_to(@feed.podcast.owner.login, @feed.podcast.owner) -%></td>
  </tr>

  <tr>
    <td class="key">rss</td>
    <td><%= link_to(@feed.url) -%></td>
  </tr>

  <tr>
    <td class="key">magnet</td>
    <td><%= link_to(magnet_feed_url(@feed.podcast, @feed)) -%></td>
  </tr>

  <tr>
    <td class="key">torrent</td>
    <td><%= link_to(torrent_feed_url(@feed.podcast, @feed)) -%></td>
  </tr>

  <tr>
    <td class="key">ability</td>
    <td><%= non_blank @feed.ability -%></td>
  </tr>

  <tr>
    <td class="key">updated</td>
    <td><%= non_blank relative_time(@feed.updated_at) -%></td>
  </tr>

  <tr>
    <td class="key">set&nbsp;itunes</td>
    <td><%= non_blank @feed.itunes_link -%></td>
  </tr>
  
  <tr>
    <td class="key">parsed&nbsp;itunes</td>
    <td><%= "NOT IMPLEMENTED YET" -%></td>
  </tr>

  <tr>
    <td class="key">cover</td>
    <td>
    <% @feed.podcast.logo.styles.keys.each do |size| -%>
      <%= image_tag @feed.podcast.logo(size) -%>
    <% end -%>
    </td>
  </tr>

  <tr>
    <td class="key">title</td>
    <td><%= non_blank @feed.title -%></td>
  </tr>

  <tr>
    <td class="key">site</td>
    <td><%= link_to(@feed.podcast.site) -%></td>
  </tr>

  <tr>
    <td class="key">line&nbsp;description</td>
    <td><%= non_blank format_with_paragraph_entity(sanitize_condensed_summary(@feed.description)) -%></td>
  </tr>

  <tr>
    <td class="key">page&nbsp;description</td>
    <td><%= non_blank sanitize_summary(@feed.description) -%></td>
  </tr>

  <tr>
    <td class="key">html&nbsp;description</td>
    <td><%= non_blank sanitize_lightly(@feed.description) -%></td>
  </tr>
</table>

<h2>Tags</h2>
<ul>
<%- @feed.podcast.tags.without_badges.all.each do |t| -%>
  <li><%= t.name %></li>
<%- end -%>
</ul>

<h2>Sources</h2>
<ul>
  <% @feed.sources.each do |s| -%>
    <li><%= link_to s.episode.date_title, info_source_url(@feed.podcast, s.episode, s) -%></li>
  <% end -%>
</ul>

<h2>XML</h2>
<pre class="formatted-xml">
  <%= @feed_xml %>
</pre>

<!-- <h2>Torrent XML</h2> -->
<!-- <pre><%=h @feed.remixed_as_torrent -%></pre> -->

<!-- <h2>Magnet XML</h2> -->
<!-- <pre><%=h @feed.remixed_as_magnet -%></pre> -->
