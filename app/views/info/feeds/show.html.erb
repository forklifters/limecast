<h1>Feed</h1>

<h2>Map</h2>
<table>
  <%= render :partial => 'info/feeds/info_source_table', :locals => {:options => {:feed => @feed}} -%>
</table>

<h2>Info</h2>
<table>
  <tr>
    <td class="key">Maker</td>
    <td><%= @feed.podcast.owner.nil? ? blankness : link_to(@feed.podcast.owner.login, @feed.podcast.owner) -%></td>
  </tr>

  <tr>
    <td class="key">RSS</td>
    <td><%= link_to(@feed.url) -%></td>
  </tr>

  <tr>
    <td class="key">Magnet</td>
    <td><%= link_to(magnet_feed_url(@feed.podcast, @feed)) -%></td>
  </tr>

  <tr>
    <td class="key">Torrent</td>
    <td><%= link_to(torrent_feed_url(@feed.podcast, @feed)) -%></td>
  </tr>

  <tr>
    <td class="key">Ability</td>
    <td><%= non_blank @feed.ability -%></td>
  </tr>

  <tr>
    <td class="key">Updated</td>
    <td><%= non_blank relative_time(@feed.updated_at) -%></td>
  </tr>

  <tr>
    <td class="key">set iTunes</td>
    <td><%= non_blank @feed.itunes_link -%></td>
  </tr>
  
  <tr>
    <td class="key">parsed iTunes</td>
    <td><%= "NOT IMPLEMENTED YET" -%></td>
  </tr>

  <tr>
    <td class="key">Cover</td>
    <td>
    <% @feed.podcast.logo.styles.keys.each do |size| -%>
      <%= image_tag @feed.podcast.logo(size) -%>
    <% end -%>
    </td>
  </tr>

  <tr>
    <td class="key">Title</td>
    <td><%= non_blank @feed.title -%></td>
  </tr>

  <tr>
    <td class="key">Site</td>
    <td><%= link_to(@feed.podcast.site) -%></td>
  </tr>

  <tr>
    <td class="key">Line Description</td>
    <td><%= non_blank format_with_paragraph_entity(sanitize_condensed_summary(@feed.description)) -%></td>
  </tr>

  <tr>
    <td class="key">Page Description</td>
    <td><%= non_blank sanitize_summary(@feed.description) -%></td>
  </tr>

  <tr>
    <td class="key">HTML Description</td>
    <td><%= non_blank sanitize_lightly(@feed.description) -%></td>
  </tr>
</table>

<h2>Tags</h2>
<ul>
<%- @feed.podcast.tags.without_badges.all.each do |t| -%>
  <li><%= t.name %></li>
<%- end -%>
</ul>

<h2>Sources</h2>
<ul>
  <% @feed.sources.each do |s| -%>
    <li><%= link_to s.episode.date_title, info_source_url(@feed.podcast, s.episode, s) -%></li>
  <% end -%>
</ul>

<h2>XML</h2>
<pre class="formatted-xml">
  <%= @feed_xml %>
</pre>

<!-- <h2>Torrent XML</h2> -->
<!-- <pre><%=h @feed.remixed_as_torrent -%></pre> -->

<!-- <h2>Magnet XML</h2> -->
<!-- <pre><%=h @feed.remixed_as_magnet -%></pre> -->
